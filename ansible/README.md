# Automatic compilation tests

## Description

Here are the automation scripts, to check if TasmoCompiler is still able to compile Tasmota. It is using `user_config_override.h` and `platformio_override.ini` files generated by TasmoCompiler. Then it runs compilation for every supported/defined board.

## Requirements

What is needed:

- platformio is installed and is available in the `PATH`
- ansible is installed and available in the `PATH`
- source code of Tasmota is available at the location defined in `tasmota_dir` ansible variable (`group_vars/all/vars.yaml`)

The easiest way to prepare testing environemnt is to use `python` virtualenv module:

```sh
apt install python3-venv
cd tasmocompiler
python3 -m venv .venv # create new python virtualenv
source .venv/bin/activate # active virtualenv
pip install platformio ansible # install platformio and ansible in virtualenv
cd ansible
ansible-playbook site.yaml # run tests
```

## Adding new board

To add new board one need to add required files to `roles/compile/files/<board_name>` and then add this board to test suite in `site.yaml`
